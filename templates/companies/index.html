{% extends 'base/base.html' %}

{% block title %}Estados{% endblock %}

{% block content %}

<div class="page-header">
    <h3 class="page-title">
        <span class="page-title-icon bg-gradient-primary text-white me-2">
            <i class="fa fa-search"></i>
        </span> Empresas
    </h3>
    <nav aria-label="breadcrumb">
        <ul class="breadcrumb">
            <li class="breadcrumb-item active" aria-current="page">
                <span></span>Overview <i class="mdi mdi-alert-circle-outline icon-sm text-primary align-middle"></i>
            </li>
        </ul>
    </nav>
</div>
<div class="row">
    <div class="col-12 grid-margin">
        <div class="card">
            <div class="card-body">
                <form method="get" action="" style="display: flex; gap: 8px; align-items: center;">
                    <input type="text" name="filter_cnpj" placeholder="CNPJ" value="{{ request.GET.filter_cnpj }}" class="form-control" style="width: 150px;">
                    <input type="text" name="filter_social" placeholder="RAZÃO SOCIAL" value="{{ request.GET.filter_social }}" class="form-control" style="width: 150px;">
                    <input type="text" name="filter_natureza" placeholder="NATUREZA JURÍDICA" value="{{ request.GET.filter_natureza }}" class="form-control" style="width: 150px;">
                    <input type="text" name="filter_porte" placeholder="PORTE" value="{{ request.GET.filter_porte }}" class="form-control" style="width: 150px;">
                    <button type="submit" class="btn btn-gradient-primary">Filtrar</button>
                </form>
                <div class="table-responsive">
                    <table class="table">
                        <table style="table-layout: fixed; width: 100%;">
                            <thead>
                                <tr>
                                    <th style="width: 15%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">CNPJ</th>
                                    <th style="width: 25%; max-width: 200px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">RAZÃO SOCIAL</th>
                                    <th style="width: 10%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">NATUREZA JURÍDICA</th>
                                    <th style="width: 10%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">QUALIFICAÇÃO</th>
                                    <th style="width: 10%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">CAPITAL</th>
                                    <th style="width: 10%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">PORTE</th>
                                    <th style="width: 10%; max-width: 100px; word-wrap: break-word; white-space: normal; overflow-wrap: break-word;">ENTE FEDERATIVO</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for data in page_obj %}
                                <tr>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.cnpj }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 200px;">{{ data.name }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.legal_nature }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.qualification }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.capital }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.size }}</td>
                                    <td style="word-wrap: break-word; white-space: normal; overflow-wrap: break-word; max-width: 100px;">{{ data.federative_entity|default_if_none:"" }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                    </table>
                </div>
            </div>
<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center mt-3">
        {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1&filter_cnpj={{ request.GET.filter_cnpj }}&filter_social={{ request.GET.filter_social }}&filter_natureza={{ request.GET.filter_natureza }}&filter_porte={{ request.GET.filter_porte }}" aria-label="Primeira">
                    <span aria-hidden="true">&laquo;&laquo;</span>
                </a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}&filter_cnpj={{ request.GET.filter_cnpj }}&filter_social={{ request.GET.filter_social }}&filter_natureza={{ request.GET.filter_natureza }}&filter_porte={{ request.GET.filter_porte }}" aria-label="Anterior">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
        {% else %}
            <li class="page-item disabled"><span class="page-link">&laquo;&laquo;</span></li>
            <li class="page-item disabled"><span class="page-link">&laquo;</span></li>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if num >= page_obj.number|add:"-2" and num <= page_obj.number|add:"2" %}
                {% if page_obj.number == num %}
                    <li class="page-item active" aria-current="page">
                        <span class="page-link">{{ num }}</span>
                    </li>
                {% else %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ num }}&filter_cnpj={{ request.GET.filter_cnpj }}&filter_social={{ request.GET.filter_social }}&filter_natureza={{ request.GET.filter_natureza }}&filter_porte={{ request.GET.filter_porte }}">{{ num }}</a>
                    </li>
                {% endif %}
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}&filter_cnpj={{ request.GET.filter_cnpj }}&filter_social={{ request.GET.filter_social }}&filter_natureza={{ request.GET.filter_natureza }}&filter_porte={{ request.GET.filter_porte }}" aria-label="Próxima">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}&filter_cnpj={{ request.GET.filter_cnpj }}&filter_social={{ request.GET.filter_social }}&filter_natureza={{ request.GET.filter_natureza }}&filter_porte={{ request.GET.filter_porte }}" aria-label="Última">
                    <span aria-hidden="true">&raquo;&raquo;</span>
                </a>
            </li>
        {% else %}
            <li class="page-item disabled"><span class="page-link">&raquo;</span></li>
            <li class="page-item disabled"><span class="page-link">&raquo;&raquo;</span></li>
        {% endif %}
    </ul>
</nav>


            </div>
        </div>
        </div>
    </div>
</div>


{% endblock %}